#ifndef CHAR_MAP_H
#define CHAR_MAP_H

#include <string>

#include "fastled_main.h"

unsigned char charMap[26][7][9] = {
    {
        // A
        {0, 0, 1, 1, 0, 0},
        {0, 0, 1, 1, 0, 0},
        {0, 1, 0, 0, 1, 0},
        {0, 1, 0, 0, 1, 0},
        {1, 1, 1, 1, 1, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
    },
    {
        // B
        {1, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 1, 1, 1, 0},
    },
    {
        // C
        {0, 0, 1, 1, 1, 0},
        {0, 1, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 0},
        {1, 0, 0, 0, 0, 0},
        {1, 0, 0, 0, 0, 0},
        {0, 1, 0, 0, 0, 1},
        {0, 0, 1, 1, 1, 0},
    },
    {
        // D
        {1, 1, 1, 1, 0, 0},
        {1, 0, 0, 0, 1, 0},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 1, 0},
        {1, 1, 1, 1, 0, 0},
    },
    {
        // E
        {1, 1, 1, 1},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 1, 1, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 1, 1, 1},
    },
    {
        // F
        {1, 1, 1, 1},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 1, 1, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
    },
    {
        // G
        {0, 0, 1, 1, 1, 0, 0},
        {0, 1, 0, 0, 0, 0, 0},
        {1, 0, 0, 0, 0, 0, 0},
        {1, 0, 0, 0, 1, 1, 1},
        {1, 0, 0, 0, 0, 1, 0},
        {0, 1, 0, 0, 0, 1, 0},
        {0, 0, 1, 1, 1, 1, 0},
    },
    {
        // H
        {0, 1, 0, 0, 0, 1},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 1, 1, 1, 1},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 0, 0, 0, 1},
    },
    {
        // I
        {1, 1, 1},
        {0, 1, 0},
        {0, 1, 0},
        {0, 1, 0},
        {0, 1, 0},
        {0, 1, 0},
        {1, 1, 1},
    },
    {
        // J
        {0, 0, 0, 1},
        {0, 0, 0, 1},
        {0, 0, 0, 1},
        {0, 0, 0, 1},
        {0, 0, 0, 1},
        {1, 0, 0, 1},
        {0, 1, 1, 0},
    },
    {
        // K
        {1, 0, 0, 1, 1},
        {1, 0, 1, 1, 0},
        {1, 1, 1, 0, 0},
        {1, 1, 1, 0, 0},
        {1, 0, 1, 1, 0},
        {1, 0, 0, 1, 0},
        {1, 0, 0, 1, 1},
    },
    {
        // L
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 0, 0, 0},
        {1, 1, 1, 1},
    },
    {
        // M
        {1, 1, 0, 0, 0, 0, 1, 1},
        {1, 0, 1, 0, 0, 1, 0, 1},
        {1, 0, 1, 0, 0, 1, 0, 1},
        {1, 0, 0, 1, 1, 0, 0, 1},
        {1, 0, 0, 1, 1, 0, 0, 1},
        {1, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 0, 0, 1},
    },

    {
        //N
        {1, 1, 0, 0, 0, 1, 1},
        {1, 1, 0, 0, 0, 1, 1},
        {1, 1, 1, 0, 0, 1, 1},
        {1, 0, 1, 0, 0, 1, 1},
        {1, 0, 1, 1, 0, 1, 1},
        {1, 0, 0, 1, 1, 1, 1},
        {1, 0, 0, 0, 1, 1, 1},
    },
    {
        //O
        {0, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {0, 1, 1, 1, 0},
    },
    {
        // P
        {0, 1, 1, 1, 1, 0},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 0, 0, 0, 1},
        {0, 1, 1, 1, 1, 0},
        {0, 1, 0, 0, 0, 0},
        {0, 1, 0, 0, 0, 0},
        {1, 1, 1, 0, 0, 0},
    },
    {
        //Q
        {0, 1, 1, 1, 1, 0, 0},
        {1, 0, 0, 0, 0, 1, 0},
        {1, 0, 0, 0, 0, 1, 0},
        {1, 0, 0, 0, 0, 1, 0},
        {1, 0, 0, 1, 0, 1, 0},
        {0, 1, 1, 1, 1, 1, 0},
        {0, 0, 0, 0, 0, 1, 1},
    },
    {
        //r
        {1, 1, 1, 1, 0, 0},
        {1, 0, 0, 0, 1, 0},
        {1, 0, 0, 0, 1, 0},
        {1, 1, 1, 1, 0, 0},
        {1, 0, 1, 1, 0, 0},
        {1, 0, 0, 0, 1, 0},
        {1, 0, 0, 0, 1, 1},
    },
    {
        //s
        {0, 1, 1, 1, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 0},
        {0, 1, 1, 1, 0},
        {0, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 1, 1, 1, 0},
    },
    {
        //t
        {1, 1, 1, 1, 1, 1, 1},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
    },
    {
        //u
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1},
        {0, 1, 1, 1, 1, 0},
    },
    {
        //v
        {1, 1, 0, 0, 0, 0, 0, 1, 1},
        {0, 1, 0, 0, 0, 0, 0, 1, 0},
        {0, 1, 0, 0, 0, 0, 0, 1, 0},
        {0, 0, 1, 0, 0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0, 0, 1, 0, 0},
        {0, 0, 0, 1, 0, 1, 0, 0, 0},
        {0, 0, 0, 0, 1, 0, 0, 0, 0},
    },
    {
        //w
        {1, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 1, 0, 0, 0, 1},
        {1, 0, 0, 1, 1, 1, 0, 0, 1},
        {1, 0, 0, 1, 0, 1, 0, 0, 1},
        {1, 0, 0, 1, 0, 1, 0, 0, 1},
        {1, 0, 0, 1, 0, 1, 0, 0, 1},
        {0, 1, 1, 0, 0, 0, 1, 1, 0},
    },

    {
        //x
        {1, 1, 0, 0, 1, 1},
        {0, 1, 0, 0, 1, 0},
        {0, 0, 1, 1, 0, 0},
        {0, 0, 1, 1, 0, 0},
        {0, 0, 1, 1, 0, 0},
        {0, 1, 0, 0, 1, 0},
        {1, 1, 0, 0, 1, 1},
    },
    {
        //Y
        {1, 1, 0, 0, 0, 1, 1},
        {1, 1, 0, 0, 0, 1, 1},
        {0, 1, 0, 0, 0, 1, 0},
        {0, 0, 1, 1, 1, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},
        {0, 0, 0, 1, 0, 0, 0},

    },
    {
        //z
        {1, 1, 1, 1, 1},
        {0, 0, 0, 1, 1},
        {0, 0, 1, 1, 0},
        {0, 0, 1, 0, 0},
        {0, 1, 1, 0, 0},
        {0, 1, 0, 0, 0},
        {1, 1, 1, 1, 1},
    },
};
unsigned char charLen[26] = {6, 5, 6, 6, 4, 4, 7, 6, 3, 4, 5, 4, 8, 7, 5, 6, 7, 6, 5, 7, 6, 9, 9, 6, 7, 5};

unsigned char numMap[10][7][9] = {
    {
        //0
        {0, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {0, 1, 1, 1, 0},
    },
    {
        //1
        {0, 0, 1, 1, 0},
        {0, 1, 1, 1, 0},
        {1, 0, 1, 1, 0},
        {0, 0, 1, 1, 0},
        {0, 0, 1, 1, 0},
        {0, 0, 1, 1, 0},
        {0, 0, 1, 1, 0},
    },
    {
        //2
        {0, 1, 1, 1, 0},
        {1, 0, 0, 1, 1},
        {0, 0, 0, 1, 1},
        {0, 0, 0, 1, 0},
        {0, 0, 1, 0, 0},
        {0, 1, 0, 0, 0},
        {1, 1, 1, 1, 1},
    },
    {
        //3
        {0, 1, 1, 1, 0},
        {0, 0, 0, 1, 1},
        {0, 0, 0, 1, 0},
        {0, 1, 1, 1, 0},
        {0, 0, 0, 1, 1},
        {0, 0, 0, 1, 1},
        {0, 1, 1, 1, 0},
    },
    {
        //4
        {0, 0, 0, 1, 0},
        {0, 0, 1, 1, 0},
        {0, 1, 0, 1, 0},
        {1, 0, 0, 1, 0},
        {1, 1, 1, 1, 1},
        {0, 0, 0, 1, 0},
        {0, 0, 0, 1, 0},
    },
    {
        //5
        {0, 1, 1, 1, 1},
        {0, 1, 0, 0, 0},
        {0, 1, 0, 0, 0},
        {0, 1, 1, 1, 0},
        {0, 0, 0, 0, 1},
        {0, 0, 0, 0, 1},
        {0, 1, 1, 1, 0},
    },
    {
        //6
        {0, 0, 1, 1, 0},
        {0, 1, 0, 0, 0},
        {1, 0, 0, 0, 0},
        {1, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {0, 1, 1, 1, 0},
    },
    {
        //7
        {1, 1, 1, 1, 1},
        {0, 0, 0, 1, 1},
        {0, 0, 0, 1, 0},
        {0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0},
        {0, 0, 1, 0, 0},
    },
    {
        //8
        {0, 1, 1, 1, 0},
        {1, 0, 0, 1, 1},
        {1, 0, 0, 1, 1},
        {0, 1, 1, 1, 0},
        {1, 1, 0, 0, 1},
        {1, 1, 0, 0, 1},
        {0, 1, 1, 1, 0},
    },
    {
        //9
        {0, 1, 1, 1, 0},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {0, 1, 1, 1, 1},
        {0, 0, 0, 1, 1},
        {0, 0, 0, 1, 0},
        {0, 1, 1, 0, 0},
    }};

class TextPrinter {
   public:
    static void print(unsigned char c[7][9], int origX, int origY, CRGB color) {
        int tempX = origX;
        for (int row = 0; row < 7; row++) {
            origX = tempX;
            for (int col = 0; col < 9; col++) {
                if (c[row][col]) {
                    leds[XYsafe(origX + col, origY + row)] = color;
                    leds[XYsafe(origX + col + 1, origY + row)] = color;
                    leds[XYsafe(origX + col + 2, origY + row)] = color;
                }
                origX += 2;
            }
        }
    }

    static void print(std::string s, int origX, int origY, CRGB col) {
        for (char c : s) {
            if (c >= 'a' && c <= 'z') {
                unsigned char idx = c - 32 - 'A';
                print(charMap[idx], origX, origY, col);
                origX += charLen[idx] * 3 + 3;
            }

            else if (c >= '0' && c <= '9') {
                print(numMap[(unsigned char)c - '0'], origX, origY, col);
                origX += 18;
            }

            else if (c == ' ') {
                origX += 18;
            }
        }
    }

    static int getStrLen(std::string s) {
        int len = 0;
        for (char c : s) {
            if (c >= 'a' && c <= 'z')
                len += charLen[(unsigned char)c - 32 - 'A'] * 3 + 3;
            else if ((c >= '0' && c <= '9') || c == ' ')
                len += 18;
        }

        return len;
    }
};

#endif